/* web-tracker - built 2026-01-09T21:28:06.137Z */
function B(e,n){return e[n]}function H(e,n,t){e[n]=t}function G(e,n){let t=B(e,n);if(Array.isArray(t))return t;let o=[];return H(e,n,o),o}function ye({windowRef:e,dataLayerName:n="d8aLayer"}){let t=e;if(!t)throw new Error("createD8aGlobal: windowRef is required");function o(...r){G(t,n).push(arguments)}return o.js=r=>o("js",r),o.config=(r,s)=>o("config",r,s),o.event=(r,s)=>o("event",r,s),o.set=r=>o("set",r),o.consent=(r,s)=>o("consent",r,s),o}function nn(){return{jsDate:null,pageLoadMs:null,propertyIds:[],propertyConfigs:{},primaryPropertyId:"",consent:{},consentDefault:{},consentUpdate:{},consentGtag:{},consentDefaultGtag:{},consentUpdateGtag:{},userId:null,set:{},events:[],__onEvent:null,__onConfig:null,hitCounter:0,sessionEngagementMs:0,sessionEngaged:!1,anonCid:null,cookieAttrsSig:null,sharedSessionTokens:null,sharedSessionValue:null,emInstalled:!1,emSiteSearchFired:!1,__lastEffectiveAnalyticsStorage:void 0}}function ce(e){let n=typeof e=="function"?e():null,t=n!=null&&n.consentGtag&&typeof n.consentGtag=="object"?n.consentGtag:{};return t&&Object.keys(t).length>0?t:n!=null&&n.consent&&typeof n.consent=="object"?n.consent:{}}function tn(e){let n=typeof e=="function"?e():null,t=n!=null&&n.consentGtag&&typeof n.consentGtag=="object"?n.consentGtag:{},o=n!=null&&n.consentDefaultGtag&&typeof n.consentDefaultGtag=="object"?n.consentDefaultGtag:{},r=n!=null&&n.consentUpdateGtag&&typeof n.consentUpdateGtag=="object"?n.consentUpdateGtag:{};return t&&Object.keys(t).length>0||o&&Object.keys(o).length>0||r&&Object.keys(r).length>0?{consent:t,consentDefault:o,consentUpdate:r}:{consent:n!=null&&n.consent&&typeof n.consent=="object"?n.consent:{},consentDefault:n!=null&&n.consentDefault&&typeof n.consentDefault=="object"?n.consentDefault:{},consentUpdate:n!=null&&n.consentUpdate&&typeof n.consentUpdate=="object"?n.consentUpdate:{}}}function tt(e){if(typeof queueMicrotask=="function"){queueMicrotask(e);return}Promise.resolve().then(e)}function ue(e){let n=typeof e=="function"?e():null;if(!n)return;let t=ce(e),o=t&&typeof t.analytics_storage=="string"?t.analytics_storage:void 0,r=n.__lastEffectiveAnalyticsStorage;if(r===void 0){n.__lastEffectiveAnalyticsStorage=o,n.__consentPingInitScheduled||(n.__consentPingInitScheduled=!0,tt(()=>{n.__consentPingInitDone=!0}));return}o!==r&&(n.__lastEffectiveAnalyticsStorage=o,n.__consentPingInitDone&&(!Array.isArray(n.propertyIds)||n.propertyIds.length===0||typeof n.__onEvent=="function"&&n.__onEvent("user_engagement",{consent_update:1})))}function x(e){return!!e&&typeof e=="object"&&!Array.isArray(e)}function on(e){if(!x(e))return null;let n=e.user_id;if(typeof n!="string")return null;let t=n.trim();return t||null}function ot(e){if(!x(e))return;let n=e.send_page_view;return typeof n=="boolean"?n:void 0}function rt(e){return x(e)?e:{}}function rn({windowRef:e,dataLayerName:n="d8aLayer"}){if(!e)throw new Error("createQueueConsumer: windowRef is required");let t=e,o=nn(),r=!1,s=null,a=!1;function c(d){let f=x(d)?d.length:null;return d&&typeof f=="number"&&typeof d!="string"?Array.from(d):Array.isArray(d)?d:null}function _(d){let f=d[0],m=d[1],k=d[2];switch(String(f||"")){case"js":{o.jsDate=m instanceof Date?m:new Date(m),o.pageLoadMs==null&&o.jsDate instanceof Date&&!Number.isNaN(o.jsDate.getTime())&&(o.pageLoadMs=o.jsDate.getTime());return}case"config":{let l=String(m||"");if(!l)return;o.propertyIds.includes(l)||o.propertyIds.push(l),o.primaryPropertyId||(o.primaryPropertyId=l);let i=o.propertyConfigs[l]||{},p=x(k)?k:{};o.propertyConfigs[l]={...i,...p};let g=on(p);g&&(o.userId=g),ot(p)!==!1&&typeof o.__onEvent=="function"&&o.__onEvent("page_view",{send_to:l}),typeof o.__onConfig=="function"&&o.__onConfig(l,p);return}case"consent":{let l=String(m||"");if(l==="default"||l==="update"){let i=rt(k);l==="default"?o.consentDefault={...o.consentDefault||{},...i||{}}:o.consentUpdate={...o.consentUpdate||{},...i||{}},o.consent={...o.consentDefault||{},...o.consentUpdate||{}},ue(()=>o)}return}case"set":{if(x(m)){o.set={...o.set||{},...m};let l=on(m);l&&(o.userId=l)}return}case"event":{let l=x(k)?k:{};o.events.push({name:String(m||""),params:l}),typeof o.__onEvent=="function"&&o.__onEvent(String(m||""),l);return}default:return}}function y(){let d=n,f=B(t,d),m=Array.isArray(f)?f:G(t,d);for(let k of m){let l=c(k);l&&_(l)}}function b(){let f=G(t,n);if(f.__d8aQueueConsumerPatched){s=f.__d8aQueueConsumerOriginalPush||null,a=!1;return}s=f.push.bind(f),f.__d8aQueueConsumerOriginalPush=s,f.push=function(...k){let l=k[0],i=c(l);return i&&_(i),s(...k)},f.__d8aQueueConsumerPatched=!0,a=!0}function w(){r||(r=!0,y(),b())}return{start:w,getState:()=>o,setOnEvent:d=>{o.__onEvent=d},setOnConfig:d=>{o.__onConfig=d},stop:()=>{if(!r)return;let f=B(t,n);if(a&&s&&Array.isArray(f)){let m=f;m.push=s;try{delete m.__d8aQueueConsumerPatched,delete m.__d8aQueueConsumerOriginalPush}catch(k){}}r=!1}}}function he(e){return Math.floor((Number(e!=null?e:Date.now())||Date.now())/1e3)}function le(){return Math.floor(Math.random()*2147483647)}function _e(e,n){let t=typeof e=="string"?e:"",o=String(n||"");return t?t.endsWith("_")&&o.startsWith("_")?`${t.slice(0,-1)}${o}`:`${t}${o}`:o}function Q(e){return _e(e,"_d8a")}function J(e,n){return _e(n,`_d8a_${e}`)}function te(e){let t=String(e||"").match(/^C1\.1\.([0-9]+)\.([0-9]+)$/);return t?{cid:`${t[1]}.${t[2]}`}:null}function we({nowMs:e}={}){return{random:le(),timestampSec:he(e)}}function an({random:e,timestampSec:n}){return`${e}.${n}`}function cn({nowMs:e}={}){let{random:n,timestampSec:t}=we({nowMs:e});return`C1.1.${n}.${t}`}var fe="S1.1.",Se=new Set(["s","o","g","t","j","d"]);function un(e){let n=String(e||"");return n.startsWith(fe)?n.slice(fe.length).split("$").map(s=>s.trim()).filter(Boolean).map(s=>{let a=s[0],c=s.slice(1);return{key:a,val:c,raw:s,known:Se.has(a)}}):null}function ln(e){let n=e.map(t=>`${t.key}${t.val}`);return`${fe}${n.join("$")}`}function O(e,n){let t=e.find(o=>o.key===n);return t?t.val:null}function I(e,n,t){let o=e.findIndex(r=>r.key===n);o>=0?e[o]={...e[o],val:String(t),known:Se.has(n)}:e.push({key:n,val:String(t),known:Se.has(n)})}function sn(){let e=le().toString(36),n=le().toString(36),t=le().toString(36);return`${e}${n}${t}`}function oe(e){let n=un(e);if(!n)return null;let t=O(n,"s"),o=O(n,"o"),r=O(n,"t"),s=O(n,"g"),a=t!=null?Number(t):NaN,c=o!=null?Number(o):NaN,_=r!=null?Number(r):NaN,y=s!=null?Number(s):NaN;return{tokens:n,sid:Number.isFinite(a)?a:null,sct:Number.isFinite(c)?c:null,lastEventTs:Number.isFinite(_)?_:null,seg:Number.isFinite(y)?y:null}}function be(e,{nowMs:n,sessionTimeoutMs:t}={}){var w,d,f;let o=he(n),r=Math.floor((Number(t!=null?t:1800*1e3)||0)/1e3),s=Array.isArray(e)&&e.length>0,a=s?e.map(m=>({...m})):[];if(!s)return I(a,"s",o),I(a,"o",1),I(a,"g",0),I(a,"t",o),I(a,"j",0),I(a,"d",sn()),{tokens:a,isNewSession:!0};let c=Number((w=O(a,"t"))!=null?w:NaN);if(!Number.isFinite(c)||o-c>r){let m=Number((d=O(a,"o"))!=null?d:NaN),k=Number.isFinite(m)?m+1:1;return I(a,"s",o),I(a,"o",k),I(a,"g",0),I(a,"t",o),I(a,"j",0),I(a,"d",sn()),{tokens:a,isNewSession:!0}}let b=Number((f=O(a,"j"))!=null?f:0);return I(a,"j",Number.isFinite(b)?b+1:1),I(a,"t",o),{tokens:a,isNewSession:!1}}function Ce(e){return ln(e)}var de={SESSION_PREFIX:fe,tokenizeSessionCookie:un,detokenizeSessionCookie:ln,getToken:O,setToken:I,nowSeconds:he,applyCookiePrefix:_e};function fn(e){let n=String(e||"").trim();if(!n)return["none"];let t=n.split(".");if(t.length===4){let r=t[t.length-1];if(String(Number(r))===r)return["none"]}let o=[];for(let r=t.length-2;r>=0;r-=1)o.push(t.slice(r).join("."));return o.push("none"),o}function dn(e){return String(e).replace(/\/+$/,"")}function ge(e){let n=new Map,t=String(e||"");if(!t)return n;for(let o of t.split(";")){let r=o.trim();if(!r)continue;let s=r.indexOf("=");if(s<0)continue;let a=r.slice(0,s).trim(),c=r.slice(s+1).trim();a&&n.set(a,c)}return n}function it(e){var n;try{return String(((n=e==null?void 0:e.location)==null?void 0:n.protocol)||"").toLowerCase()==="https:"}catch(t){return!1}}function gn(e,n,t){let o=[];return o.push(`${e}=${n}`),t.path&&o.push(`Path=${String(t.path)}`),t.expires&&o.push(`Expires=${t.expires.toUTCString()}`),t.maxAgeSeconds!=null&&o.push(`Max-Age=${String(t.maxAgeSeconds)}`),t.sameSite&&o.push(`SameSite=${String(t.sameSite)}`),t.domain&&o.push(`Domain=${String(t.domain)}`),t.secure&&o.push("Secure"),o.join("; ")}function st(e){return e&&(e==="none"?null:e.startsWith(".")?e:`.${e}`)}function pn({windowRef:e}){let n=e;if(!(n!=null&&n.document))throw new Error("createCookieJar: windowRef.document is required");let t=n.document;function o(){var c;return ge((c=n.document)==null?void 0:c.cookie)}function r(c){return o().get(c)}function s(c,_,y={}){var h,L,N;let b=y.path||"/",w=it(n),d=y.sameSite||"Lax",f=!w&&String(d).toLowerCase()==="none"?"Lax":d,m=y.secure!=null?!!y.secure&&w:w,k=(h=y.maxAgeSeconds)!=null?h:null,l=(L=y.expires)!=null?L:null,i={path:b,sameSite:f,secure:m,maxAgeSeconds:k,expires:l},p=y.domain||"auto",g=String(((N=n.location)==null?void 0:N.hostname)||""),C=p==="auto"?fn(g):[p],u=[];for(let R of C){let S=st(R),A=gn(c,_,{...i,domain:S}),D=String(t.cookie||"");t.cookie=A;let W=String(t.cookie||""),U=D!==W||r(c)===_;if(u.push({candidate:R,domain:R==="none"?null:S,cookieStr:A,before:D,after:W,readBack:r(c),stuck:U}),U)return{ok:!0,domain:R==="none"?null:S,cookieStr:A,attempts:u}}return{ok:!1,domain:null,cookieStr:null,attempts:u}}function a(c,_={}){return s(c,"deleted",{..._,expires:new Date(0)})}return{get:r,set:s,del:a,__internal:{parseCookieHeader:ge,buildSetCookieString:gn}}}var mn=new Set(["value","tax","shipping"]),kn={item_id:"id",item_name:"nm",affiliation:"af",coupon:"cp",discount:"ds",index:"lp",item_brand:"br",item_category:"ca",item_category2:"c2",item_category3:"c3",item_category4:"c4",item_category5:"c5",item_list_id:"li",item_list_name:"ln",item_variant:"va",location_id:"lo",price:"pr",quantity:"qt",promotion_id:"pi",promotion_name:"pn"};function xe(e){return e==null||typeof e=="string"||typeof e=="number"||typeof e=="boolean"}function at(e){return!!e&&typeof e=="object"}function X(e){return e==null?null:typeof e=="string"?e:typeof e=="boolean"?e?"1":"0":String(e)}function ct(e){if(typeof e=="number")return e;if(typeof e=="boolean")return e?1:0;if(typeof e=="string"){let n=Number(e);return Number.isFinite(n)?n:null}return null}function Y(e,n,t){t!=null&&e.set(`ep.${n}`,String(t))}function yn(e,n,t){t!=null&&e.set(`epn.${n}`,String(t))}function ut(e){let n=at(e)?e:{},t=[],o=[];for(let[s,a]of Object.entries(kn)){if(!(s in n))continue;let c=n[s];if(!xe(c))continue;let _=X(c);_!=null&&t.push(`${a}${_}`)}let r=0;for(let s of Object.keys(n)){if(s in kn)continue;let a=n[s];if(!xe(a))continue;let c=X(a);c!=null&&(o.push(`k${r}${s}`),o.push(`v${r}${c}`),r+=1)}return[...t,...o].join("~")}function Sn({propertyId:e,eventName:n,eventParams:t,cookieHeader:o,clientId:r,userId:s,cookiePrefix:a,ignoreReferrer:c,browser:_,pageLoadMs:y,hitCounter:b,engagementTimeMs:w,uachParams:d,campaign:f,contentGroup:m,consentParams:k,debugMode:l}){let i=new URLSearchParams;i.set("v","2"),i.set("tid",String(e||"")),i.set("en",String(n||"")),l===!0&&i.set("_dbg","1"),y!=null&&i.set("_p",String(y)),b!=null&&i.set("_s",String(b)),w!=null&&i.set("_et",String(w));let p=ge(o);if(r!=null&&String(r))i.set("cid",String(r));else{let S=te(p.get(Q(a)));S!=null&&S.cid&&i.set("cid",S.cid)}typeof s=="string"&&s.trim()&&i.set("uid",s.trim());let g=f||{};typeof g.campaign_id=="string"&&g.campaign_id.trim()&&i.set("ci",g.campaign_id.trim()),typeof g.campaign_source=="string"&&g.campaign_source.trim()&&i.set("cs",g.campaign_source.trim()),typeof g.campaign_medium=="string"&&g.campaign_medium.trim()&&i.set("cm",g.campaign_medium.trim()),typeof g.campaign_name=="string"&&g.campaign_name.trim()&&i.set("cn",g.campaign_name.trim()),typeof g.campaign_term=="string"&&g.campaign_term.trim()&&i.set("ct",g.campaign_term.trim()),typeof g.campaign_content=="string"&&g.campaign_content.trim()&&i.set("cc",g.campaign_content.trim()),typeof m=="string"&&m.trim()&&Y(i,"content_group",m.trim());let C=J(e,a),u=oe(p.get(C));(u==null?void 0:u.sid)!=null&&i.set("sid",String(u.sid)),(u==null?void 0:u.sct)!=null&&i.set("sct",String(u.sct)),(u==null?void 0:u.seg)!=null&&i.set("seg",String(u.seg));let h=_;if(h.dl&&i.set("dl",String(h.dl)),h.dt&&i.set("dt",String(h.dt)),c===!0&&i.set("ir","1"),i.set("dr",String(h.dr)),h.dh&&i.set("dh",String(h.dh)),h.ul&&i.set("ul",String(h.ul)),h.sr&&i.set("sr",String(h.sr)),d)for(let[S,A]of Object.entries(d))A==null||A===""||i.set(S,String(A));k&&(k.gcs&&i.set("gcs",String(k.gcs)),k.gcd&&i.set("gcd",String(k.gcd)));let L=t||{};l===!0&&!Object.prototype.hasOwnProperty.call(L,"debug_mode")&&Y(i,"debug_mode","1");let N=L.currency;typeof N=="string"&&i.set("cu",N),L.transaction_id!=null&&Y(i,"transaction_id",X(L.transaction_id)),L.coupon!=null&&Y(i,"coupon",X(L.coupon)),L.customer_type!=null&&Y(i,"customer_type",X(L.customer_type));for(let S of mn)L[S]!=null&&yn(i,S,ct(L[S]));let R=L.items;if(Array.isArray(R)){let S=R.slice(0,200);for(let A=0;A<S.length;A+=1){let D=ut(S[A]);D&&i.set(`pr${A+1}`,D)}}for(let S of Object.keys(L)){if(S==="items"||S==="currency"||S==="transaction_id"||S==="coupon"||S==="customer_type"||mn.has(S)||S==="user_id"||S==="client_id"||S==="campaign_id"||S==="campaign_source"||S==="campaign_medium"||S==="campaign_name"||S==="campaign_term"||S==="campaign_content"||S==="page_location"||S==="page_title"||S==="page_referrer"||S==="content_group"||S==="ignore_referrer"||S==="language"||S==="screen_resolution"||S==="cookie_domain"||S==="cookie_expires"||S==="cookie_flags"||S==="cookie_path"||S==="cookie_prefix"||S==="cookie_update"||S==="send_page_view"||S==="send_to")continue;let A=L[S];xe(A)&&(typeof A=="number"?yn(i,S,A):Y(i,S,X(A)))}return i}function lt(e){return/^https?:\/\//i.test(String(e||""))}function Le(e){if(typeof e=="string"&&lt(e))return Le({server_container_url:e});let t=((e&&typeof e=="object"?e:{}).server_container_url||"").trim();if(!t)throw new Error("server_container_url is required");return dn(t)}function hn(e){let n=(()=>{var c;try{return String(((c=e==null?void 0:e.location)==null?void 0:c.href)||"")}catch(_){return""}})(),t=(()=>{var c;try{return String(((c=e==null?void 0:e.document)==null?void 0:c.title)||"")}catch(_){return""}})(),o=(()=>{var c;try{return String(((c=e==null?void 0:e.document)==null?void 0:c.referrer)||"")}catch(_){return""}})(),r=(()=>{var c;try{return String(((c=e==null?void 0:e.location)==null?void 0:c.hostname)||"")}catch(_){return""}})(),s=(()=>{var c;try{return String(((c=e==null?void 0:e.navigator)==null?void 0:c.language)||"")}catch(_){return""}})(),a=(()=>{var c,_;try{let y=(c=e==null?void 0:e.screen)==null?void 0:c.width,b=(_=e==null?void 0:e.screen)==null?void 0:_.height;if(typeof y=="number"&&typeof b=="number")return`${y}x${b}`}catch(y){}return""})();return{dl:n,dt:t,dr:o,dh:r,ul:s,sr:a}}function ft(e){return new Promise(n=>setTimeout(n,e))}function dt(e){return e===429||e>=500}async function _n({url:e,windowRef:n,useBeacon:t,maxRetries:o=1,initialBackoffMs:r=200}){var w;let s=n,a=(w=s==null?void 0:s.navigator)==null?void 0:w.sendBeacon;if(t&&typeof a=="function")try{return a.call(s.navigator,e),{ok:!0,via:"beacon"}}catch(d){}let c=s==null?void 0:s.fetch;if(typeof c!="function")throw new Error("fetch is not available");let _={method:"POST",keepalive:!0,credentials:"include",cache:"no-store",redirect:"follow",mode:"no-cors"},y=0,b=r;for(;;){y+=1;try{let d=await c.call(s,e,_),f=typeof(d==null?void 0:d.status)=="number"?d.status:0;if(!dt(f))return{ok:!0,via:"fetch",status:f}}catch(d){}if(y>o)return{ok:!1,via:"fetch",status:null};await ft(b),b*=2}}function Ne(e){return String((e||{}).analytics_storage||"").toLowerCase()!=="denied"}var gt=2*365*24*60*60;function De({jar:e,consent:n,nowMs:t,cookieDomain:o="auto",cookiePrefix:r="",cookiePath:s="/",cookieSameSite:a="Lax",cookieSecure:c=void 0,cookieMaxAgeSeconds:_=gt,cookieUpdate:y=!0,forceCookieAttrsWrite:b=!1}={}){let w=Q(r),d=e==null?void 0:e.get(w),f=te(d);if(f!=null&&f.cid)return Ne(n||{})?y===!1&&!b?{cid:f.cid,wrote:!1}:(e==null||e.set(w,String(d||""),{domain:o,path:s,sameSite:a,secure:c,maxAgeSeconds:_}),{cid:f.cid,wrote:!0}):{cid:f.cid,wrote:!1};let m=cn({nowMs:t}),k=te(m),l=(k==null?void 0:k.cid)||null;return Ne(n||{})?y===!1&&d?{cid:l,wrote:!1}:(e==null||e.set(w,m,{domain:o,path:s,sameSite:a,secure:c,maxAgeSeconds:_}),{cid:l,wrote:!0}):{cid:l,wrote:!1}}var pt=["platform","platformVersion","architecture","model","bitness","fullVersionList","wow64","mobile"];function bn(e){e.d8a_tag_data=e.d8a_tag_data||{};let n=e.d8a_tag_data,t=n.uach_store;return x(t)||(n.uach_store={}),n.uach_store}function mt(e){let n=e.navigator;if(!x(n))return!1;let t=n.userAgentData;return x(t)?typeof t.getHighEntropyValues=="function":!1}function Cn(e){return bn(e).uach||null}function xn(e){if(!mt(e))return null;let n=bn(e);return n.uach_promise||(n.uach_promise=e.navigator.userAgentData.getHighEntropyValues(pt).then(t=>(n.uach=n.uach||t,n.uach))),n.uach_promise}function wn(e){return encodeURIComponent(String(e||""))}function Ln(e){if(!e)return null;let n={};return e.architecture&&(n.uaa=String(e.architecture)),e.bitness&&(n.uab=String(e.bitness)),Array.isArray(e.fullVersionList)&&(n.uafvl=e.fullVersionList.map(t=>`${wn(t.brand||"")};${wn(t.version||"")}`).join("|")),n.uamb=e.mobile?"1":"0",e.model&&(n.uam=String(e.model)),e.platform&&(n.uap=String(e.platform)),e.platformVersion&&(n.uapv=String(e.platformVersion)),n.uaw=e.wow64?"1":"0",n}function Nn(e){switch(e){case 1:return"1";case 2:case 4:return"0";default:return"-"}}function Dn(e){return String(e||"").toLowerCase()==="denied"?2:1}function An({consent:e}){let n=e||{},t=Dn(n.ad_storage),o=Dn(n.analytics_storage);return`G1${Nn(t)}${Nn(o)}`}function Pn({consentDefault:e,consentUpdate:n}){let t=e||{},o=n||{};function r(_){let y=String(_||"").toLowerCase();return y==="granted"?"granted":y==="denied"?"denied":null}function s(_,y){let b=r(_),w=r(y);return!b&&!w?"l":b==="denied"&&!w?"p":b==="granted"&&!w?"t":!b&&w==="denied"?"m":!b&&w==="granted"?"n":b==="denied"&&w==="denied"?"q":b==="granted"&&w==="granted"?"v":b==="denied"&&w==="granted"?"r":b==="granted"&&w==="denied"?"u":"l"}let a=[["ad_storage","3"],["analytics_storage","3"],["ad_user_data","2"],["ad_personalization","5"]],c="13";for(let[_,y]of a)c+=`${s(t[_],o[_])}${y}`;return c+="l1",c}function Rn(){let e=we({nowMs:Date.now()});return an(e)}function vn({windowRef:e,state:n}){return n?(typeof n.anonCid=="string"&&n.anonCid||(n.anonCid=Rn()),n.anonCid):Rn()}function En({windowRef:e,nowMs:n=()=>Date.now()}={}){if(!e)throw new Error("createEngagementTimer: windowRef is required");let t=e,o=!1,r=!0,s=!0,a=!0,c=null,_=0;function y(){var u;try{if(typeof t.hasFocus=="function")return!!t.hasFocus();if(typeof((u=t.document)==null?void 0:u.hasFocus)=="function")return!!t.document.hasFocus()}catch(h){}return!0}function b(){var u,h;try{if(typeof((u=t.document)==null?void 0:u.hidden)=="boolean")return!t.document.hidden;if(typeof((h=t.document)==null?void 0:h.visibilityState)=="string")return t.document.visibilityState!=="hidden"}catch(L){}return!0}function w(){return r&&s&&a}function d(){let u=n();if(c!=null){let h=Math.max(0,u-c);_+=h,c=u}w()?c==null&&(c=u):c=null}function f(){d(),r=!0,d()}function m(){d(),r=!1,d()}function k(){d(),s=b(),d()}function l(){d(),a=!0,d()}function i(){d(),a=!1,d()}function p(){var u;o||(o=!0,r=y(),s=b(),a=!0,d(),typeof t.addEventListener=="function"&&(t.addEventListener("focus",f),t.addEventListener("blur",m),t.addEventListener("pageshow",l),t.addEventListener("pagehide",i)),typeof((u=t.document)==null?void 0:u.addEventListener)=="function"&&t.document.addEventListener("visibilitychange",k))}function g(){return d(),_|0}function C(){d();let u=_|0;return _=0,c=w()?n():null,u}return{start:p,peek:g,getAndReset:C,__internal:{sync:d}}}function F(e){let n=typeof e=="function"?e():null;return Array.isArray(n==null?void 0:n.propertyIds)&&n.propertyIds.length>0?n.propertyIds.slice():[]}function V(e,n){var r;let t=typeof e=="function"?e():null,o=(r=t==null?void 0:t.propertyConfigs)==null?void 0:r[n];return o&&typeof o=="object"?o:{}}function Ae(e){let n=typeof e=="function"?e():null;return n!=null&&n.set&&typeof n.set=="object"?n.set:{}}function Tn({enabled:e}){return{enabled:e===!0,log:(...n)=>{if(e===!0)try{console.log(...n)}catch(t){}}}}function In({key:e,eventParams:n,config:t,setParams:o}){let r=n||{},s=t||{},a=o||{};return Object.prototype.hasOwnProperty.call(r,e)&&r[e]!=null?r[e]:Object.prototype.hasOwnProperty.call(s,e)&&s[e]!=null?s[e]:Object.prototype.hasOwnProperty.call(a,e)&&a[e]!=null?a[e]:null}function M({key:e,eventParams:n,config:t,setParams:o}){let r=In({key:e,eventParams:n,config:t,setParams:o});return typeof r=="string"&&r.trim()?r.trim():null}function Pe({key:e,eventParams:n,config:t,setParams:o}){let r=In({key:e,eventParams:n,config:t,setParams:o});return typeof r=="boolean"?r:null}function kt(e){let n=typeof e=="string"?e:"";if(!n.trim())return{};let t=n.split(";").map(r=>r.trim()).filter(Boolean),o={};for(let r of t){let s=r.toLowerCase();if(s==="secure"&&(o.secure=!0),s.startsWith("samesite=")){let c=r.split("=").slice(1).join("=").trim().toLowerCase();c==="lax"&&(o.sameSite="Lax"),c==="strict"&&(o.sameSite="Strict"),c==="none"&&(o.sameSite="None")}}return o}function Mn({propertyCfg:e,setParams:n,https:t,state:o,isDebugEnabled:r}){var A,D,W,U,$,P,q;let s=x(e)?e:{},a=x(n)?n:{},c=(A=s.cookie_domain)!=null?A:a.cookie_domain,_=typeof c=="string"&&c.trim()?c:c==null?"auto":String(c),y=(D=s.cookie_prefix)!=null?D:a.cookie_prefix,b=typeof y=="string"?y:"",w=(W=s.cookie_path)!=null?W:a.cookie_path,d=typeof w=="string"&&w.trim()?w:"/",f=(U=s.cookie_update)!=null?U:a.cookie_update,m=typeof f=="boolean"?f:!0,k=($=s.cookie_expires)!=null?$:a.cookie_expires,l=Number.isFinite(Number(k))?Number(k):null,i=l!=null?l:2*365*24*60*60,p=(q=(P=s.cookie_flags)!=null?P:a.cookie_flags)!=null?q:"",g=kt(p),C=g.sameSite||"Lax",u=t===!0&&g.secure===!0?!0:t===!0,h=typeof r=="function"?r({config:s,setParams:a}):!1,L=JSON.stringify({domain:_,prefix:b,path:d,sameSite:C,secure:u,maxAgeSeconds:i}),N=`${b}|${_}|${d}`;o&&!o.cookieAttrsSig&&(o.cookieAttrsSig={});let S=(o!=null&&o.cookieAttrsSig?o.cookieAttrsSig[N]:void 0)!==L;return o!=null&&o.cookieAttrsSig&&(o.cookieAttrsSig[N]=L),{cookieDomain:_,cookiePrefix:b,cookiePath:d,cookieSameSite:C,cookieSecure:u,cookieUpdate:m,cookieMaxAgeSeconds:i,forceCookieAttrsWrite:S,debug:h}}function Re(e){return x(e)?{ok:e.ok,domain:e.domain,cookieStr:e.cookieStr,attempts:e.attempts}:{}}function Wn({state:e,destinations:n,jar:t,getPropertyConfig:o,resolveCookieSettings:r,sessionTimeoutMs:s,engagementTimeMs:a,engagedThresholdMs:c,nowMs:_,log:y}){var l,i,p;if(!e||!Array.isArray(n)||n.length===0||!t||typeof o!="function"||typeof r!="function")return;let b=Number.isFinite(Number(_))?Number(_):Date.now(),w=Array.isArray(e.sharedSessionTokens)?e.sharedSessionTokens:null;if(!w)for(let g of n){let C=o(g),u=r(C),h=J(g,u.cookiePrefix),L=t.get(h),N=oe(L);if(N!=null&&N.tokens){w=N.tokens;break}}let d=be(w||null,{nowMs:b,sessionTimeoutMs:s});d.isNewSession&&(e.sessionEngagementMs=0,e.sessionEngaged=!1);let f=de.getToken(d.tokens,"g");e.sessionEngagementMs=(Number(e.sessionEngagementMs)||0)+(Number(a)||0),!e.sessionEngaged&&Number(c)>0&&e.sessionEngagementMs>=Number(c)&&(de.setToken(d.tokens,"g",1),e.sessionEngaged=!0);let m=de.getToken(d.tokens,"g"),k=d.isNewSession||f!==m;e.sharedSessionTokens=d.tokens,e.sharedSessionValue=Ce(d.tokens);for(let g of n){let C=o(g),u=r(C),h=J(g,u.cookiePrefix),L=t.get(h);if(!L){let N=t.set(h,e.sharedSessionValue,{domain:u.cookieDomain,path:u.cookiePath,sameSite:u.cookieSameSite,secure:u.cookieSecure,maxAgeSeconds:(l=u.cookieMaxAgeSeconds)!=null?l:void 0});u.debug&&(y==null||y("[d8a] set session cookie (create)",{pid:g,cookieName:h,...Re(N),cookieReadBack:t.get(h)}));continue}if(u.cookieUpdate===!0||k){let N=t.set(h,e.sharedSessionValue,{domain:u.cookieDomain,path:u.cookiePath,sameSite:u.cookieSameSite,secure:u.cookieSecure,maxAgeSeconds:(i=u.cookieMaxAgeSeconds)!=null?i:void 0});u.debug&&(y==null||y("[d8a] set session cookie (value+attrs update)",{pid:g,cookieName:h,...Re(N),cookieReadBack:t.get(h)}));continue}if(u.forceCookieAttrsWrite){let N=t.set(h,L,{domain:u.cookieDomain,path:u.cookiePath,sameSite:u.cookieSameSite,secure:u.cookieSecure,maxAgeSeconds:(p=u.cookieMaxAgeSeconds)!=null?p:void 0});u.debug&&(y==null||y("[d8a] set session cookie (attrs update)",{pid:g,cookieName:h,...Re(N),cookieReadBack:t.get(h)}));continue}u.debug&&(y==null||y("[d8a] set session cookie (no write)",{pid:g,cookieName:h,reason:"cookie_update=false and session value unchanged and force_cookie_attrs_write=false",cookieUpdate:u.cookieUpdate,shouldWriteSessionValue:k,forceCookieAttrsWrite:u.forceCookieAttrsWrite,cookieReadBack:t.get(h)}))}}function yt(e){return typeof e=="string"&&e.trim()?[e.trim()]:Array.isArray(e)?e.filter(n=>typeof n=="string"&&n.trim()).map(n=>String(n).trim()):null}function Un({windowRef:e,getState:n}){let t=e;if(!t)throw new Error("createDispatcher: windowRef is required");let o=[],r=null,s=!1,a=pn({windowRef:t});xn(t);let c=En({windowRef:t});c.start();let _=1e4;function y(){let g=F(n)[0]||"";return g?V(n,g):{}}function b({config:p,setParams:g}){let C=x(p)?p:{},u=x(g)?g:{};return C.debug_mode===!0||u.debug_mode===!0}function w(){var p;try{return String(((p=t==null?void 0:t.location)==null?void 0:p.protocol)||"").toLowerCase()==="https:"}catch(g){return!1}}function d(){let p=n();return p?p.pageLoadMs!=null?p.pageLoadMs:p.jsDate instanceof Date&&!Number.isNaN(p.jsDate.getTime())?(p.pageLoadMs=p.jsDate.getTime(),p.pageLoadMs):(p.pageLoadMs=Date.now(),p.pageLoadMs):null}function f(p,g){var h;o.push({name:p,params:g||{}});let C=y(),u=Number((h=C==null?void 0:C.max_batch_size)!=null?h:25);if(o.length>=u){k({useBeacon:!1});return}m()}function m(){var C;if(r!=null)return;let p=y(),g=Number((C=p==null?void 0:p.flush_interval_ms)!=null?C:1e3);r=t.setTimeout(()=>{r=null,k({useBeacon:!1})},g)}async function k({useBeacon:p}){var Ue,Be,$e,Ge,Oe,Fe,Ve,qe,He,je;if(r!=null&&(t.clearTimeout(r),r=null),o.length===0)return{sent:0};let g=F(n),C=g[0]||"",u=C?V(n,C):{},h=Number((Ue=u==null?void 0:u.max_batch_size)!=null?Ue:25),L=o.splice(0,h),N=ce(n),R=tn(n),S=u.session_timeout_ms,A=typeof S=="number"?S:1800*1e3,D=n(),W=d(),U=String((N==null?void 0:N.analytics_storage)||"").toLowerCase(),$=U==="denied",P=D!=null&&D.set&&typeof D.set=="object"?D.set:{},q=w(),z=b({config:u,setParams:P}),Ie=($e=(Be=u==null?void 0:u.session_engagement_time_sec)!=null?Be:P==null?void 0:P.session_engagement_time_sec)!=null?$e:10,qn=Number.isFinite(Number(Ie))?Number(Ie):10,Hn=Math.max(0,Math.floor(qn*1e3)),re=Tn({enabled:z});re.log("[d8a] flush",{href:String(((Ge=t==null?void 0:t.location)==null?void 0:Ge.href)||""),propertyIds:g,analyticsStorage:U||"(unset)",analyticsDenied:$,cookieHeader:String(((Oe=t==null?void 0:t.document)==null?void 0:Oe.cookie)||"")});function Me(ee){return Mn({propertyCfg:ee,setParams:P,https:q,state:D,isDebugEnabled:b})}let We=0;for(let ee of L){let ze=x(ee.params)?ee.params:{},Ke=yt(ze.send_to),ie=Ke||g;if(!ie||ie.length===0)continue;let E={...ze};delete E.send_to;let me=c.getAndReset();!$&&D&&Wn({state:D,destinations:ie,jar:a,getPropertyConfig:ne=>V(n,ne),resolveCookieSettings:Me,sessionTimeoutMs:A,engagementTimeMs:me,engagedThresholdMs:Hn,nowMs:Date.now(),log:re.enabled?re.log:null}),D&&(D.hitCounter=(D.hitCounter||0)+1);let se=[];for(let ne of ie){let T=V(n,ne),jn=Le(T),v=Me(T),zn=M({key:"user_id",eventParams:E,config:T,setParams:P}),Kn=M({key:"client_id",eventParams:E,config:T,setParams:P}),Qn=Pe({key:"debug_mode",eventParams:E,config:T,setParams:P})===!0,Jn={campaign_id:M({key:"campaign_id",eventParams:E,config:T,setParams:P}),campaign_source:M({key:"campaign_source",eventParams:E,config:T,setParams:P}),campaign_medium:M({key:"campaign_medium",eventParams:E,config:T,setParams:P}),campaign_name:M({key:"campaign_name",eventParams:E,config:T,setParams:P}),campaign_term:M({key:"campaign_term",eventParams:E,config:T,setParams:P}),campaign_content:M({key:"campaign_content",eventParams:E,config:T,setParams:P})},Yn=M({key:"content_group",eventParams:E,config:T,setParams:P}),Xn=Pe({key:"ignore_referrer",eventParams:E,config:T,setParams:P})===!0,K={...hn(t)},Qe=M({key:"page_location",eventParams:E,config:T,setParams:P}),Je=M({key:"page_title",eventParams:E,config:T,setParams:P}),Ye=M({key:"page_referrer",eventParams:E,config:T,setParams:P}),Xe=M({key:"language",eventParams:E,config:T,setParams:P}),Ze=M({key:"screen_resolution",eventParams:E,config:T,setParams:P});if(Qe&&(K.dl=Qe),Je&&(K.dt=Je),Ye!=null&&(K.dr=Ye),Xe&&(K.ul=Xe),Ze&&(K.sr=Ze),!$)if(v.debug){let ke=Q(v.cookiePrefix),en=a.get(ke),ae=De({jar:a,consent:N,cookieDomain:v.cookieDomain,cookiePrefix:v.cookiePrefix,cookiePath:v.cookiePath,cookieSameSite:v.cookieSameSite,cookieSecure:v.cookieSecure,cookieMaxAgeSeconds:(Fe=v.cookieMaxAgeSeconds)!=null?Fe:void 0,cookieUpdate:v.cookieUpdate,forceCookieAttrsWrite:v.forceCookieAttrsWrite}),nt=ae!=null&&ae.wrote?en?"attrs update":"create":"no write";re.log(`[d8a] set client cookie (${nt})`,{pid:ne,cookiePrefix:v.cookiePrefix,result:ae,cookieName:ke,cookieBefore:en,cookieReadBack:a.get(ke),documentCookie:String(((Ve=t==null?void 0:t.document)==null?void 0:Ve.cookie)||"")})}else De({jar:a,consent:N,cookieDomain:v.cookieDomain,cookiePrefix:v.cookiePrefix,cookiePath:v.cookiePath,cookieSameSite:v.cookieSameSite,cookieSecure:v.cookieSecure,cookieMaxAgeSeconds:(qe=v.cookieMaxAgeSeconds)!=null?qe:void 0,cookieUpdate:v.cookieUpdate,forceCookieAttrsWrite:v.forceCookieAttrsWrite});let Zn=Sn({propertyId:ne,eventName:ee.name,eventParams:E,cookieHeader:$?"":String(((He=t.document)==null?void 0:He.cookie)||""),clientId:Kn||($?vn({windowRef:t,state:D}):null),userId:zn,cookiePrefix:v.cookiePrefix,browser:K,ignoreReferrer:Xn,pageLoadMs:W!=null?Number(W):null,hitCounter:(je=D==null?void 0:D.hitCounter)!=null?je:null,engagementTimeMs:me!=null?Number(me):null,uachParams:Ln(Cn(t)),campaign:Jn,contentGroup:Yn||null,consentParams:{gcs:An({consent:R.consent}),gcd:Pn({consentDefault:R.consentDefault,consentUpdate:R.consentUpdate})},debugMode:Qn}),et=`${jn}?${Zn.toString()}`;se.push(_n({url:et,windowRef:t,useBeacon:p}))}se.length>0&&(await Promise.all(se),We+=se.length)}return o.length>0&&m(),{sent:We}}function l({useBeacon:p=!1}={}){return k({useBeacon:p===!0})}function i(){var p;t!=null&&t.addEventListener&&(s||(s=!0,t.addEventListener("pagehide",()=>{try{F(n).length>0&&c.peek()>0&&o.unshift({name:"user_engagement",params:{}})}catch(g){}k({useBeacon:!1})}),(p=t.document)!=null&&p.addEventListener&&t.document.addEventListener("visibilitychange",()=>{if(t.document.hidden){try{F(n).length>0&&c.peek()>=_&&o.unshift({name:"user_engagement",params:{}})}catch(g){}k({useBeacon:!1})}})))}return{enqueueEvent:f,flush:k,flushNow:l,attachLifecycleFlush:i}}function Z(e){return typeof e=="string"?e:""}function ve(e,n){var t;try{let o=x(e)?e:null,r=o&&x(o.currentScript)?o.currentScript:null,s=Z(r==null?void 0:r.src);if(!s)return"";let a=o&&x(o.location)?Z((t=o.location)==null?void 0:t.href):"",c=new URL(s,a||void 0);return Z(c.searchParams.get(n))}catch(o){return""}}function Bn({windowRef:e,dataLayerName:n}){if(typeof n=="string"&&n.trim())return n.trim();let t=Z(e==null?void 0:e.d8aDataLayerName);if(t.trim())return t.trim();let o=ve(e==null?void 0:e.document,"l");return o.trim()?o.trim():"d8aLayer"}function $n({windowRef:e,globalName:n}){if(typeof n=="string"&&n.trim())return n.trim();let t=Z(e==null?void 0:e.d8aGlobalName);if(t.trim())return t.trim();let o=ve(e==null?void 0:e.document,"g");return o.trim()?o.trim():"d8a"}function Gn({windowRef:e,gtagDataLayerName:n}){if(typeof n=="string"&&n.trim())return n.trim();let t=Z(e==null?void 0:e.d8aGtagDataLayerName);if(t.trim())return t.trim();let o=ve(e==null?void 0:e.document,"gl");return o.trim()?o.trim():"dataLayer"}var pe="__d8aConsentBridgeHubs";function St(e){return x(e)}function Ee(e,n){if(!e)return null;let t=String(n||"dataLayer"),o=B(e,pe),r=St(o)?o:{};(!o||o!==r)&&H(e,pe,r);let s=r[t];if(s&&typeof s=="object")return s;let a={subscribers:new Set,originalPush:null,patched:!1,dataLayerName:t};return r[t]=a,a}function On({windowRef:e,getState:n,dataLayerName:t="dataLayer"}){if(!e)throw new Error("createGtagConsentBridge: windowRef is required");let o=e;if(!o)throw new Error("createGtagConsentBridge: windowRef is required");if(typeof n!="function")throw new Error("createGtagConsentBridge: getState is required");let r=!1,s=null;function a(f){let m=x(f)?f.length:null;if(f&&typeof m=="number"&&typeof f!="string")try{return Array.from(f)}catch(k){return null}return Array.isArray(f)?f:null}function c({action:f,patch:m}){let k=n();if(k){if(f==="default")k.consentDefaultGtag={...k.consentDefaultGtag||{},...m||{}};else if(f==="update")k.consentUpdateGtag={...k.consentUpdateGtag||{},...m||{}};else return;k.consentGtag={...k.consentDefaultGtag||{},...k.consentUpdateGtag||{}},ue(n)}}function _(f){let[m,k,l]=f;if(m!=="consent")return null;let i=String(k||"");return i!=="default"&&i!=="update"||!x(l)?null:["consent",i,l]}function y(f){let m=_(f);if(!m)return;let[,k,l]=m;c({action:k,patch:l})}function b(){let m=B(o,t);if(Array.isArray(m))for(let k of m){let l=a(k);l&&y(l)}}function w(){let f=t,m=G(o,f),k=Ee(o,f);k&&(k.patched||(k.originalPush=m.push.bind(m),m.push=function(...i){let p=i[0],g=a(p);if(g)for(let C of k.subscribers)try{C(g)}catch(u){}return k.originalPush(...i)},k.patched=!0,m.__d8aConsentBridgePatched=!0))}function d(){if(r)return;r=!0;let f=Ee(o,t);f&&(f.subscribers.add(y),s=()=>{f.subscribers.delete(y)},b(),w())}return{start:d,stop:()=>{if(!r)return;let f=t,m=Ee(o,f);if(!m)return;typeof s=="function"&&s(),s=null;let k=B(o,f);if(m.subscribers.size===0&&m.originalPush&&Array.isArray(k)){let l=k;l.push=m.originalPush,m.originalPush=null,m.patched=!1;try{delete l.__d8aConsentBridgePatched;let i=B(o,pe),p=x(i)?i:null;p&&(delete p[f],Object.keys(p).length===0&&H(o,pe,void 0))}catch(i){}}r=!1}}}function Fn(e,n=[]){return Array.isArray(e)?e.map(t=>String(t).trim()).filter(Boolean):typeof e=="string"?e.split(",").map(t=>t.trim()).filter(Boolean):n}function ht(e,n){try{return new URL(String(e||""),n?String(n):void 0)}catch(t){return null}}function _t(e){let n=e;for(let t=0;t<100&&n;t+=1){let o=x(n)?n:null,r=String((o==null?void 0:o.tagName)||"").toLowerCase();if(r==="a"||r==="area")return n;n=(o==null?void 0:o.parentNode)||null}return null}function j(e,n){if(!e)return null;let t=x(e)?e:null;try{if(typeof(t==null?void 0:t.getAttribute)=="function"){let r=t.getAttribute(n);if(r!=null)return r}}catch(r){}let o=t?t[n]:null;return o!=null?String(o):null}function wt(e){let n=String((e==null?void 0:e.protocol)||"").toLowerCase();return n==="http:"||n==="https:"}function bt(e,n){let t=String(e||"").toLowerCase(),o=String(n||"").toLowerCase().replace(/^\./,"");return!t||!o?!1:t===o||t.endsWith(`.${o}`)}function Ct(e){return String((e==null?void 0:e.pathname)||"").split("/").filter(Boolean).slice(-1)[0]||""}function xt(e){let n=String(e||""),t=n.lastIndexOf(".");return t<0?"":n.slice(t+1).toLowerCase()}function Te(e){return String(e||"").replace(/\s+/g," ").trim()}function Lt(e){let n=j(e,"id");return Te(n)||null}function Nt(e){let n=j(e,"className")||j(e,"class");return Te(n)||null}function Dt(e){let n=j(e,"textContent")||j(e,"innerText");return Te(n)||null}function Vn({windowRef:e,getState:n,dispatcher:t}){let o=e;if(!o)throw new Error("createEnhancedMeasurement: windowRef is required");if(typeof n!="function")throw new Error("createEnhancedMeasurement: getState is required");if(!t)throw new Error("createEnhancedMeasurement: dispatcher is required");function r(l,i){let p=l[i];return typeof p=="boolean"?p:void 0}function s(l,i){return l[i]}function a({propertyId:l,key:i,defaultValue:p}){let g=Ae(n),C=V(n,l),u=r(C,i);if(u!=null)return u;let h=r(g,i);return h!=null?h:p}function c({propertyId:l,key:i,defaultList:p}){let g=Ae(n),C=V(n,l),u=s(C,i),h=s(g,i);return u!=null?Fn(u,p):h!=null?Fn(h,p):p}function _(){let l=n();return!l||l.emInstalled?!1:(l.emInstalled=!0,!0)}function y(){let l=n();return!l||l.emSiteSearchFired?!1:(l.emSiteSearchFired=!0,!0)}function b(){var u;let l=F(n);if(l.length===0||!y())return;let i=String(((u=o==null?void 0:o.location)==null?void 0:u.search)||"");if(!i||i==="?")return;let p=new URLSearchParams(i.startsWith("?")?i.slice(1):i),g=["q","s","search","query","keyword"],C=new Map;for(let h of l){if(!a({propertyId:h,key:"site_search_enabled",defaultValue:!0}))continue;let N=c({propertyId:h,key:"site_search_query_params",defaultList:g}),R="";for(let A of N){let D=p.get(A);if(D&&String(D).trim()){R=String(D).trim();break}}if(!R)continue;let S=C.get(R)||[];S.push(h),C.set(R,S)}for(let[h,L]of C.entries())t.enqueueEvent("view_search_results",{search_term:h,send_to:L})}function w({propertyId:l,linkHostname:i}){var C;if(!a({propertyId:l,key:"outbound_clicks_enabled",defaultValue:!0}))return!1;let g=c({propertyId:l,key:"outbound_exclude_domains",defaultList:[String(((C=o==null?void 0:o.location)==null?void 0:C.hostname)||"")]});for(let u of g)if(bt(i,u))return!1;return!0}function d({propertyId:l,ext:i}){if(!a({propertyId:l,key:"file_downloads_enabled",defaultValue:!0}))return!1;let g=c({propertyId:l,key:"file_download_extensions",defaultList:["pdf","doc","docx","xls","xlsx","ppt","pptx","csv","txt","rtf","zip","rar","7z","dmg","exe","apk"]}),C=new Set(g.map(u=>String(u).toLowerCase().replace(/^\./,"")));return!!i&&C.has(String(i).toLowerCase().replace(/^\./,""))}function f(l){var $,P,q;let i=F(n);if(i.length===0)return;let p=x(l)?l.target:null,g=_t(p);if(!g)return;let C=j(g,"href");if(!C)return;let u=ht(C,String((($=o==null?void 0:o.location)==null?void 0:$.href)||""));if(!u||!wt(u))return;let h=String(u.href||""),L=String(u.hostname||""),N=Lt(g),R=Nt(g),S=Dt(g),A=Ct(u)||j(g,"download")||"",D=xt(A),W=[],U=[];for(let z of i)d({propertyId:z,ext:D})&&W.push(z),w({propertyId:z,linkHostname:L})&&U.push(z);if(W.length>0){t.enqueueEvent("file_download",{link_url:h,...N?{link_id:N}:{},...R?{link_classes:R}:{},...S?{link_text:S}:{},file_name:A,file_extension:D,send_to:W}),(P=t.flushNow)==null||P.call(t,{useBeacon:!1});return}U.length>0&&(t.enqueueEvent("click",{link_url:h,...N?{link_id:N}:{},...R?{link_classes:R}:{},link_domain:L,outbound:"1",send_to:U}),(q=t.flushNow)==null||q.call(t,{useBeacon:!1}))}function m(){var i;if(!_())return;try{b(),!((i=n())!=null&&i.emSiteSearchFired)&&typeof(o==null?void 0:o.setTimeout)=="function"&&o.setTimeout(()=>{try{b()}catch(p){}},0)}catch(p){}let l=o==null?void 0:o.document;l&&typeof l.addEventListener=="function"&&(l.addEventListener("click",f,!0),l.addEventListener("auxclick",f,!0))}function k(){try{b()}catch(l){}}return{start:m,onConfig:k}}function At({windowRef:e=window,dataLayerName:n,globalName:t,gtagDataLayerName:o}={}){let r=e;if(!r)throw new Error("installD8a: window is required");r.d8a_tag_data=r.d8a_tag_data||{};let s=r.d8a_tag_data,a=Bn({windowRef:r,dataLayerName:n}),c=$n({windowRef:r,globalName:t}),_=Gn({windowRef:r,gtagDataLayerName:o});s.__d8aInstallResults||(s.__d8aInstallResults={}),s.__d8aInstallResultsByDataLayer||(s.__d8aInstallResultsByDataLayer={});let y=s.__d8aInstallResults,b=s.__d8aInstallResultsByDataLayer,w=`${a}|${c}`;if(y[w])return y[w];G(r,a);let d=b[a]||null;if(d){typeof B(r,c)!="function"&&H(r,c,ye({windowRef:r,dataLayerName:a}));let i={consumer:d.consumer,dispatcher:d.dispatcher,dataLayerName:a,globalName:c};return y[w]=i,i}typeof B(r,c)!="function"&&H(r,c,ye({windowRef:r,dataLayerName:a}));let f=rn({windowRef:r,dataLayerName:a}),m=Un({windowRef:r,getState:f.getState});m.attachLifecycleFlush(),f.setOnEvent((i,p)=>{m.enqueueEvent(i,p)});let k=On({windowRef:r,getState:f.getState,dataLayerName:_});f.start(),k.start();try{let i=Vn({windowRef:r,getState:f.getState,dispatcher:m});f.setOnConfig(()=>i.onConfig()),i.start()}catch(i){}let l={consumer:f,dispatcher:m,dataLayerName:a,globalName:c};return y[w]=l,b[a]=l,l}export{At as installD8a};
//# sourceMappingURL=index.mjs.map

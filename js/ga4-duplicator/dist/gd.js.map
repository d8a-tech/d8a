{
  "version": 3,
  "sources": ["../src/ga4-duplicator.ts"],
  "sourcesContent": ["/**\n * GA4 Duplicator - Intercepts GA4 collect calls and sends duplicates to D8A.\n */\n\ninterface GA4Destination {\n  measurement_id: string;\n  server_container_url: string;\n}\n\ninterface GA4DuplicatorOptions {\n  server_container_url?: string;\n  destinations?: GA4Destination[];\n  debug?: boolean;\n}\n\n(window as any).createGA4Duplicator = function (options: GA4DuplicatorOptions) {\n  /**\n   * Shared logic and configuration for interceptors.\n   */\n  interface InterceptorContext {\n    debug: boolean;\n    isTargetUrl(url: string | null | undefined): boolean;\n    buildDuplicateUrl(url: string): string;\n  }\n\n  /**\n   * Base interface for monkey-patching implementations.\n   */\n  interface NetworkInterceptor {\n    install(context: InterceptorContext): void;\n  }\n\n  class FetchInterceptor implements NetworkInterceptor {\n    install(ctx: InterceptorContext): void {\n      const originalFetch = window.fetch;\n      window.fetch = function (\n        this: any,\n        resource: RequestInfo | URL,\n        config?: RequestInit,\n      ): Promise<Response> {\n        const requestUrl =\n          typeof resource === \"string\"\n            ? resource\n            : resource instanceof URL\n              ? resource.toString()\n              : (resource as any).url;\n        const method = (config && config.method) || (resource as any).method || \"GET\";\n\n        if (ctx.isTargetUrl(requestUrl)) {\n          const upperMethod = (method || \"GET\").toUpperCase();\n\n          // If we need the body from a Request, clone BEFORE calling the original fetch\n          let prepareBodyPromise: Promise<any> = Promise.resolve(undefined);\n          if (upperMethod === \"POST\") {\n            if (config && Object.prototype.hasOwnProperty.call(config, \"body\")) {\n              prepareBodyPromise = Promise.resolve(config.body);\n            } else if (typeof Request !== \"undefined\" && resource instanceof Request) {\n              try {\n                const clonedReq = resource.clone();\n                prepareBodyPromise = clonedReq.blob().catch(() => undefined);\n              } catch {\n                prepareBodyPromise = Promise.resolve(undefined);\n              }\n            }\n          }\n\n          // First send original request to Google Analytics\n          const originalPromise = originalFetch.apply(this, arguments as any);\n\n          // Then send duplicate\n          const duplicateUrl = ctx.buildDuplicateUrl(requestUrl);\n\n          if (upperMethod === \"GET\") {\n            originalFetch(duplicateUrl, { method: \"GET\", keepalive: true }).catch((error) => {\n              if (ctx.debug) console.error(\"gtm interceptor: error duplicating GET fetch:\", error);\n            });\n          } else if (upperMethod === \"POST\") {\n            prepareBodyPromise.then((dupBody) => {\n              originalFetch(duplicateUrl, { method: \"POST\", body: dupBody, keepalive: true }).catch(\n                (error) => {\n                  if (ctx.debug)\n                    console.error(\"gtm interceptor: error duplicating POST fetch:\", error);\n                },\n              );\n            });\n          }\n\n          return originalPromise;\n        }\n\n        return originalFetch.apply(this, arguments as any);\n      };\n    }\n  }\n\n  class XhrInterceptor implements NetworkInterceptor {\n    install(ctx: InterceptorContext): void {\n      const originalXHROpen = XMLHttpRequest.prototype.open;\n      const originalXHRSend = XMLHttpRequest.prototype.send;\n\n      XMLHttpRequest.prototype.open = function (this: any, method: string, url: string | URL) {\n        this._requestMethod = method;\n        this._requestUrl = url;\n        return originalXHROpen.apply(this, arguments as any);\n      };\n\n      XMLHttpRequest.prototype.send = function (\n        this: any,\n        body?: Document | XMLHttpRequestBodyInit | null,\n      ) {\n        if (this._requestUrl && ctx.isTargetUrl(this._requestUrl)) {\n          // First send original request to Google Analytics\n          const originalResult = originalXHRSend.apply(this, arguments as any);\n\n          // Then send duplicate to our endpoint mimicking method and payload\n          try {\n            const method = (this._requestMethod || \"GET\").toUpperCase();\n            const duplicateUrl = ctx.buildDuplicateUrl(this._requestUrl);\n\n            if (method === \"GET\") {\n              fetch(duplicateUrl, { method: \"GET\", keepalive: true }).catch((error) => {\n                if (ctx.debug) console.error(\"gtm interceptor: error duplicating GET xhr:\", error);\n              });\n            } else if (method === \"POST\") {\n              fetch(duplicateUrl, { method: \"POST\", body: body as any, keepalive: true }).catch(\n                (error) => {\n                  if (ctx.debug)\n                    console.error(\"gtm interceptor: error duplicating POST xhr:\", error);\n                },\n              );\n            }\n          } catch (dupErr) {\n            if (ctx.debug) console.error(\"gtm interceptor: xhr duplication failed:\", dupErr);\n          }\n          return originalResult;\n        }\n        return originalXHRSend.apply(this, arguments as any);\n      };\n    }\n  }\n\n  class BeaconInterceptor implements NetworkInterceptor {\n    install(ctx: InterceptorContext): void {\n      if (!navigator.sendBeacon) return;\n\n      const originalSendBeacon = navigator.sendBeacon;\n      navigator.sendBeacon = function (\n        this: any,\n        url: string | URL,\n        data?: BodyInit | null,\n      ): boolean {\n        if (ctx.isTargetUrl(url as string)) {\n          const originalResult = originalSendBeacon.apply(this, arguments as any);\n          try {\n            originalSendBeacon.call(navigator, ctx.buildDuplicateUrl(url as string), data);\n          } catch (e) {\n            if (ctx.debug) console.error(\"gtm interceptor: error duplicating sendBeacon:\", e);\n          }\n          return originalResult;\n        }\n        return originalSendBeacon.apply(this, arguments as any);\n      };\n    }\n  }\n\n  class ScriptInterceptor implements NetworkInterceptor {\n    install(ctx: InterceptorContext): void {\n      try {\n        const scriptSrcDescriptor = Object.getOwnPropertyDescriptor(\n          HTMLScriptElement.prototype,\n          \"src\",\n        );\n        const originalScriptSrcSetter = scriptSrcDescriptor && scriptSrcDescriptor.set;\n        const originalScriptSrcGetter = scriptSrcDescriptor && scriptSrcDescriptor.get;\n        const originalScriptSetAttribute = HTMLScriptElement.prototype.setAttribute;\n\n        const duplicateIfGA4Url = (urlString: string) => {\n          try {\n            if (!ctx.isTargetUrl(urlString)) return;\n            fetch(ctx.buildDuplicateUrl(urlString), { method: \"GET\", keepalive: true }).catch(\n              (error) => {\n                if (ctx.debug)\n                  console.error(\"gtm interceptor: error duplicating script GET:\", error);\n              },\n            );\n          } catch {\n            // Intentionally empty\n          }\n        };\n\n        if (originalScriptSrcSetter && originalScriptSrcGetter) {\n          const setter = originalScriptSrcSetter;\n          const getter = originalScriptSrcGetter;\n          Object.defineProperty(HTMLScriptElement.prototype, \"src\", {\n            configurable: true,\n            enumerable: true,\n            get: function (this: any) {\n              return getter.call(this);\n            },\n            set: function (this: any, value: string) {\n              try {\n                const last = this.__ga4LastSrcDuplicated;\n                if (value && value !== last) {\n                  duplicateIfGA4Url(String(value));\n                  this.__ga4LastSrcDuplicated = String(value);\n                }\n                const self = this;\n                const onloadOnce = function () {\n                  try {\n                    const finalUrl = self.src;\n                    if (finalUrl && finalUrl !== self.__ga4LastSrcDuplicated) {\n                      duplicateIfGA4Url(finalUrl);\n                      self.__ga4LastSrcDuplicated = finalUrl;\n                    }\n                  } catch {}\n                  self.removeEventListener(\"load\", onloadOnce);\n                };\n                this.addEventListener(\"load\", onloadOnce);\n              } catch {}\n              setter.call(this, value);\n            },\n          });\n        }\n\n        HTMLScriptElement.prototype.setAttribute = function (\n          this: any,\n          name: string,\n          value: string,\n        ) {\n          try {\n            if (String(name).toLowerCase() === \"src\") {\n              const v = String(value);\n              const last = this.__ga4LastSrcDuplicated;\n              if (v && v !== last) {\n                duplicateIfGA4Url(v);\n                this.__ga4LastSrcDuplicated = v;\n              }\n              const selfAttr = this;\n              const onloadOnceAttr = function () {\n                try {\n                  const finalUrlAttr = selfAttr.src;\n                  if (finalUrlAttr && finalUrlAttr !== selfAttr.__ga4LastSrcDuplicated) {\n                    duplicateIfGA4Url(finalUrlAttr);\n                    selfAttr.__ga4LastSrcDuplicated = finalUrlAttr;\n                  }\n                } catch {}\n                selfAttr.removeEventListener(\"load\", onloadOnceAttr);\n              };\n              this.addEventListener(\"load\", onloadOnceAttr);\n            }\n          } catch {\n            // Intentionally empty\n          }\n          return originalScriptSetAttribute.apply(this, arguments as any);\n        };\n      } catch {}\n    }\n  }\n\n  if ((window as any).__ga4DuplicatorInitialized) {\n    if (options.debug) console.warn(\"GA4 Duplicator: already initialized.\");\n    return;\n  }\n\n  const destinations: GA4Destination[] = [];\n  if (options.destinations && Array.isArray(options.destinations)) {\n    for (let i = 0; i < options.destinations.length; i++) {\n      destinations.push(options.destinations[i]);\n    }\n  }\n\n  if (options.server_container_url) {\n    destinations.push({\n      measurement_id: \"*\",\n      server_container_url: options.server_container_url,\n    });\n  }\n\n  if (destinations.length === 0) {\n    console.error(\"GA4 Duplicator: either server_container_url or destinations array is required\");\n    return;\n  }\n\n  function normalizePath(p: string): string {\n    p = String(p || \"\");\n    p = p.replace(/\\/+$/, \"\");\n    return p === \"\" ? \"/\" : p;\n  }\n\n  function matchesId(pattern: string, id: string): boolean {\n    if (!pattern || pattern === \"*\") return true;\n    try {\n      const regexStr = pattern.replace(/[.+^${}()|[\\]\\\\]/g, \"\\\\$&\").replace(/\\*/g, \".*\");\n      return new RegExp(\"^\" + regexStr + \"$\", \"i\").test(id);\n    } catch {\n      return pattern.toLowerCase() === id.toLowerCase();\n    }\n  }\n\n  function getMeasurementId(url: string): string {\n    try {\n      const parsed = new URL(url, location.href);\n      return parsed.searchParams.get(\"tid\") || parsed.searchParams.get(\"id\") || \"\";\n    } catch {\n      const match = url.match(/[?&](?:tid|id)=([^&?#]+)/);\n      return match ? decodeURIComponent(match[1]) : \"\";\n    }\n  }\n\n  function getDestinationForId(id: string): GA4Destination | null {\n    for (let i = 0; i < destinations.length; i++) {\n      if (matchesId(destinations[i].measurement_id, id)) {\n        return destinations[i];\n      }\n    }\n    return null;\n  }\n\n  function getDuplicateEndpointUrl(dest: GA4Destination): URL {\n    const trackingURL = String(dest.server_container_url || \"\").trim();\n    const u = new URL(trackingURL, location.href);\n    u.search = \"\";\n    u.hash = \"\";\n    return u;\n  }\n\n  function isTargetUrl(url: string | null | undefined): boolean {\n    if (!url || typeof url !== \"string\") return false;\n    try {\n      const parsed = new URL(url, location.href);\n\n      for (let i = 0; i < destinations.length; i++) {\n        const duplicateTarget = getDuplicateEndpointUrl(destinations[i]);\n        if (\n          parsed.origin === duplicateTarget.origin &&\n          normalizePath(parsed.pathname) === normalizePath(duplicateTarget.pathname)\n        ) {\n          return false;\n        }\n      }\n\n      const params = parsed.searchParams;\n      const hasGtm = params.has(\"gtm\");\n      const hasTagExp = params.has(\"tag_exp\");\n      const measurementId = params.get(\"tid\") || params.get(\"id\") || \"\";\n      const isMeasurementIdGA4 = /^G-[A-Z0-9]+$/i.test(measurementId);\n\n      return hasGtm && hasTagExp && isMeasurementIdGA4;\n    } catch {\n      if (typeof url === \"string\") {\n        for (let j = 0; j < destinations.length; j++) {\n          try {\n            const target = getDuplicateEndpointUrl(destinations[j]);\n            const targetNoQuery = target.origin + target.pathname;\n            if (url.indexOf(targetNoQuery) !== -1) return false;\n          } catch {\n            // Intentionally empty\n          }\n        }\n\n        const hasGtmFallback = url.indexOf(\"gtm=\") !== -1;\n        const hasTagExpFallback = url.indexOf(\"tag_exp=\") !== -1;\n        const idMatch = url.match(/[?&](?:tid|id)=G-[A-Za-z0-9]+/);\n        return !!(hasGtmFallback && hasTagExpFallback && idMatch);\n      }\n      return false;\n    }\n  }\n\n  function buildDuplicateUrl(originalUrl: string): string {\n    const id = getMeasurementId(originalUrl);\n    const dest = getDestinationForId(id);\n    if (!dest) return \"\";\n\n    const dst = getDuplicateEndpointUrl(dest);\n    try {\n      const src = new URL(originalUrl, location.href);\n      dst.search = src.search;\n    } catch {}\n    return dst.toString();\n  }\n\n  const context: InterceptorContext = {\n    debug: !!options.debug,\n    isTargetUrl,\n    buildDuplicateUrl,\n  };\n\n  const interceptors: NetworkInterceptor[] = [\n    new FetchInterceptor(),\n    new XhrInterceptor(),\n    new BeaconInterceptor(),\n    new ScriptInterceptor(),\n  ];\n\n  for (let i = 0; i < interceptors.length; i++) {\n    try {\n      interceptors[i].install(context);\n    } catch (e) {\n      if (options.debug) console.error(\"GA4 Duplicator: failed to install interceptor\", e);\n    }\n  }\n\n  (window as any).__ga4DuplicatorInitialized = true;\n};\n"],
  "mappings": "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",
  "names": ["e"]
}
